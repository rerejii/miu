# Miu Task Bot

ご主人様専属メイドのみうちゃんが、ご主人様のタスク進捗を見守り、サボり防止のリマインドをしてくれるDiscordボットです。

## みうちゃんについて

- 屋敷で一番小さなメイドだけど、一番ご主人様にべったり
- 超ポジティブで元気いっぱい、甘えたい欲が強い
- 大切なぽんちゃん（猫のぬいぐるみ）をいつも抱きしめている
- タスク完了で全力で喜び、サボりには拗ねつつも心配してくれる

## 自然言語対応

スラッシュコマンドを使わなくても、自然な会話でタスク管理ができます:

| 発言例 | 動作 |
|--------|------|
| 「レポート作成を30分でやる」 | タスク開始 |
| 「終わった！」「できた」 | タスク完了 |
| 「やめる」「スキップ」 | タスクスキップ |
| 「今どんな状況？」 | 状況確認 |
| 「休憩」「10分休む」 | 休憩開始 |
| 「今日は終わり」 | 本日終了 |
| 「今日何やった？」 | 履歴確認 |

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 環境変数の設定

`.env.example` を `.env` にコピーして、各値を設定:

```bash
cp .env.example .env
```

```
DISCORD_TOKEN=xxx           # Discord Bot Token
DISCORD_USER_ID=xxx         # 通知先ユーザーID（DM用）
XAI_API_KEY=xxx             # Grok API Key
MEM0_API_KEY=xxx            # mem0 Cloud API Key
TZ=Asia/Tokyo               # タイムゾーン
```

### 3. 起動

```bash
# 開発モード（ホットリロード）
npm run dev

# 本番モード
npm start
```

## コマンド一覧

### タスク管理

| コマンド | 説明 | 例 |
|----------|------|-----|
| `/next <タスク> <分>` | 次のタスクを宣言 | `/next データパイプラインのテスト 30` |
| `/done` | 現在のタスクを完了 | `/done` |
| `/done <感想>` | 完了＋感想を記録 | `/done 思ったより簡単だった` |
| `/status` | 現在のタスク状況を確認 | `/status` |
| `/skip` | 現在のタスクをスキップ | `/skip` |
| `/break <分>` | 休憩を宣言 | `/break 15` |
| `/done_today` | 今日の作業終了 | `/done_today` |
| `/history` | 今日のタスク履歴を表示 | `/history` |
| `/history <日数>` | 過去N日の履歴を表示 | `/history 7` |

### カスタムリマインド

| コマンド | 説明 | 例 |
|----------|------|-----|
| `/remind add <自然言語>` | リマインドを追加 | `/remind add 平日の朝9時に薬飲んだか確認して` |
| `/remind list` | 登録済みリマインド一覧 | `/remind list` |
| `/remind delete <ID>` | リマインドを削除 | `/remind delete 3` |

## 定期通知

| 時刻 | 内容 | 曜日 |
|------|------|------|
| 07:00 | 起床挨拶 | 毎日 |
| 10:00 | 出勤挨拶 | 平日のみ |
| 19:00 | 退勤挨拶 | 平日のみ |
| 22:00 | 就寝挨拶 | 毎日 |

## 通知可能時間帯

| 区分 | 時間帯 | 動作 |
|------|--------|------|
| 平日 | 07:00-10:00 | 通知ON |
| 平日 | 10:00-19:00 | 通知OFF（仕事中） |
| 平日 | 19:00-22:00 | 通知ON |
| 土日祝 | 07:00-22:00 | 通知ON |
| 全日 | 22:00-07:00 | 通知OFF（睡眠） |

## Railwayデプロイ

1. Railwayでプロジェクトを作成
2. 環境変数を設定
3. `railway up` でデプロイ
